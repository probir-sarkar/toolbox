{"version":3,"sources":["../src/photon-image-converter.ts"],"sourcesContent":["// Core Photon types + named exports\r\nimport { PhotonImage } from \"@silvia-odwyer/photon\";\r\n\r\nexport type ImageFormat = \"jpeg\" | \"png\" | \"webp\";\r\n\r\nexport class PhotonImageConverter {\r\n  private readonly image: PhotonImage;\r\n\r\n  private constructor(image: PhotonImage) {\r\n    this.image = image;\r\n  }\r\n\r\n  static fromBlob(blob: Blob) {\r\n    return new PhotonImageConverter(PhotonImage.new_from_blob(blob));\r\n  }\r\n\r\n  /**\r\n   * Converts the image to the specified format.\r\n   * If the format is JPEG, the quality can be specified in the options.\r\n   * If no quality is specified, the default quality is 0.92.\r\n   * If the format is PNG or WebP, the quality cannot be specified.\r\n   * @param {ImageFormat} format The format to convert to.\r\n   * @param {{ quality?: number }} options The options for the conversion.\r\n   * @returns {Uint8Array} A promise that resolves with the converted image as a blob.\r\n   */\r\n  convertToFormat(format: ImageFormat, options?: { quality?: number }): Uint8Array {\r\n    switch (format) {\r\n      case \"jpeg\":\r\n        return this.image.get_bytes_jpeg(options?.quality || 0.92);\r\n      case \"png\":\r\n        return this.image.get_bytes();\r\n      case \"webp\":\r\n        return this.image.get_bytes_webp();\r\n    }\r\n  }\r\n}\r\n"],"mappings":";AACA,SAAS,mBAAmB;AAIrB,IAAM,uBAAN,MAAM,sBAAqB;AAAA,EAGxB,YAAY,OAAoB;AACtC,SAAK,QAAQ;AAAA,EACf;AAAA,EAEA,OAAO,SAAS,MAAY;AAC1B,WAAO,IAAI,sBAAqB,YAAY,cAAc,IAAI,CAAC;AAAA,EACjE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAWA,gBAAgB,QAAqB,SAA4C;AAC/E,YAAQ,QAAQ;AAAA,MACd,KAAK;AACH,eAAO,KAAK,MAAM,eAAe,SAAS,WAAW,IAAI;AAAA,MAC3D,KAAK;AACH,eAAO,KAAK,MAAM,UAAU;AAAA,MAC9B,KAAK;AACH,eAAO,KAAK,MAAM,eAAe;AAAA,IACrC;AAAA,EACF;AACF;","names":[]}